{"version":3,"sources":["webpack:///./src/views/Products.vue?946b","webpack:///./src/views/Products.vue","webpack:///./src/components/ProductModal.vue","webpack:///./src/components/ProductModal.vue?6218","webpack:///./src/views/Products.vue?95da"],"names":["class","products","item","key","id","href","getModalProduct","src","imageUrl","alt","title","origin_price","price","type","addToCart","page","pagination","getProducts","ref","product","tabindex","role","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","tempProduct","imagesUrl","img","category","description","content","modifyQty","qty","min","$emit","props","data","modal","watch","this","mounted","$refs","productModal","keyboard","backdrop","methods","showModal","show","hideModal","hide","action","render","cartsData","isLoading","url","$http","get","then","res","success","alert","message","catch","err","console","log","cart","product_id","post","components","created","__scopeId"],"mappings":"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","file":"js/chunk-cf5e79f0.a67b40d4.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Products.vue?vue&type=style&index=0&id=025ce07c&scoped=true&lang=css\"","<template>\n  <div class=\"products\">\n    <h1>W6 產品列表 購物車 表單驗證</h1>\n    <!-- 產品列表  -->\n    <table class=\"table align-middle mt-4\">\n      <thead class=\"table align-middle\">\n        <tr>\n          <th>圖片</th>\n          <th>商品名稱</th>\n          <th>價格</th>\n          <th>商品介紹</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in products\" :key=\"item.id\">\n          <td>\n            <a href=\"#\" @click=\"getModalProduct(item.id)\"\n              ><img\n                :src=\"item.imageUrl\"\n                :alt=\"`${item.title}圖片`\"\n                class=\"list-image\"\n            /></a>\n          </td>\n          <td>{{ item.title }}</td>\n          <td>\n            <del>原價：{{ item.origin_price }}元</del>\n            <div>優惠價：{{ item.price }}元</div>\n          </td>\n          <td>\n            <div class=\"btn-group btn-group-sm\">\n              <button\n                @click=\"getModalProduct(item.id)\"\n                type=\"button\"\n                class=\"btn btn-outline-secondary\"\n              >\n                查看商品資訊\n              </button>\n              <button\n                @click=\"addToCart(item.id)\"\n                type=\"button\"\n                class=\"btn btn-outline-danger\"\n              >\n                加到購物車\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <!-- pagination bloc  -->\n    <div class=\"col-6\">\n      <pagination :page=\"pagination\" @get-products=\"getProducts\"></pagination>\n    </div>\n    <!-- 單一產品Modal  -->\n      <product-modal ref=\"productModal\" :product=\"product\" @add-to-cart=\"addToCart\"></product-modal>\n  </div>\n</template>\n\n<script>\nimport pagination from '@/components/Pagination.vue'\nimport productModal from '@/components/ProductModal.vue'\nexport default {\n  // name: \"Products\",\n  data () {\n    return {\n      products: [],\n      product: {},\n      cartsData: {},\n      isLoading: true,\n      pagination: {}\n    }\n  },\n  methods: {\n    // Get 所有商品\n    getProducts (page = 1) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products?page=${page}`\n      this.$http\n        .get(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.products = res.data.products\n            this.isLoading = false\n            this.pagination = res.data.pagination\n          } else {\n            alert(res.data.message)\n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    // Get 單一商品(Modal)\n    getModalProduct (id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${id}`\n      this.$http\n        .get(url)\n        .then((res) => {\n          if (res.data.success) {\n            console.log('ok?')\n            this.product = res.data.product\n            this.$refs.productModal.showModal()\n          } else {\n            alert(res.data.message)\n          }\n        }).catch((err) => {\n          console.log(err)\n        })\n    },\n    // Post 增加購物車\n    addToCart (id, qty = 1) {\n      this.isLoading = true\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      const cart = {\n        product_id: id,\n        qty: qty\n      }\n      this.$http\n        .post(url, {\n          data: cart\n        })\n        .then((res) => {\n          if (res.data.success) {\n            alert(res.data.message)\n            this.isLoading = false\n            this.$refs.productModal.hideModal()\n          } else {\n            alert(res.data.message)\n          }\n        }).catch((err) => {\n          console.log(err)\n        })\n    }\n  },\n  components: {\n    productModal,\n    pagination\n  },\n  created () {\n    this.getProducts()\n  }\n}\n</script>\n\n<style scoped>\n.list-image {\n  width: 200px;\n}\n</style>\n","<template>\n<div class=\"modal fade\" id=\"productModal\" ref=\"productModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\"\n  aria-hidden=\"true\" >\n  <div class=\"modal-dialog modal-xl\" role=\"document\">\n    <div class=\"modal-content border-0\">\n      <div class=\"modal-header bg-dark text-white\">\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n          <span>{{tempProduct.title}}</span>\n        </h5>\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"row\">\n          <div class=\"col-sm-6\">\n            <img class=\"img-fluid\" :src=\"tempProduct.imageUrl\" alt=\"\">\n            <div class=\"row mt-2\">\n              <div class=\"col-4\" v-for=\"(img) in tempProduct.imagesUrl\"\n                :key=\"img\">\n                <img :src=\"img\" class=\"img-fluid\" :alt=\"tempProduct.title\">\n              </div>\n            </div>\n          </div>\n          <div class=\"col-sm-6\">\n            <span class=\"badge bg-primary rounded-pill\">{{tempProduct.category}}</span>\n            <p>{{tempProduct.description}}</p>\n            <p>商品內容：{{tempProduct.content}}</p>\n            <del class=\"h6\">原價：{{tempProduct.origin_price}} 元</del>\n            <div class=\"h5\">優惠價：{{tempProduct.price}}</div>\n            <div>\n          <div class=\"row flex-row-reverse mt-3\">\n            <div class=\"col-6\">\n              <div class=\"input-group\">\n                <div @click=\"modifyQty('decrease')\" class=\"btn_modify_qty_cart border\"> - </div>\n                <input type=\"number\" class=\"form-control m-0 p-1 text-center fw-bold border\" v-model.number=\"qty\" min=\"1\">\n                <div @click=\"modifyQty('add')\"  class=\"btn_modify_qty_cart border\"> + </div>\n                <button @click=\"$emit('add-to-cart', tempProduct.id,qty)\" type=\"button\" class=\"btn btn-primary\">加入購物車</button>\n              </div>\n            </div>\n          </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal'\nexport default {\n  // 父層取資料 props\n  props: ['product'],\n  data () {\n    return {\n      tempProduct: {},\n      modal: '',\n      qty: 1\n    }\n  },\n  watch: { // 待查正確使用方法\n    product () {\n      this.tempProduct = this.product\n    }\n  },\n  mounted () {\n    this.modal = new Modal(this.$refs.productModal, {\n      keyboard: false,\n      backdrop: 'static'\n    })\n  },\n  methods: {\n    showModal () {\n      this.qty = 1\n      this.modal.show()\n    },\n    hideModal () {\n      this.modal.hide()\n    },\n    modifyQty (action) {\n      // console.log('modifyQtyOK');\n      if (action === 'decrease') {\n        if (this.qty > 1) {\n          this.qty--\n        } else {\n          return this.qty\n        }\n      } else if (action === 'add') {\n        this.qty++\n      }\n    }\n  }\n}\n</script>\n","import { render } from \"./ProductModal.vue?vue&type=template&id=435758d1\"\nimport script from \"./ProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./ProductModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Products.vue?vue&type=template&id=025ce07c&scoped=true\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\n\nimport \"./Products.vue?vue&type=style&index=0&id=025ce07c&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-025ce07c\"\n\nexport default script"],"sourceRoot":""}