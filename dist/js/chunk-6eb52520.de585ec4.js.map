{"version":3,"sources":["webpack:///./src/views/Products.vue?77fb","webpack:///./node_modules/mitt/dist/mitt.mjs","webpack:///./src/assets/javascript/emitter.js","webpack:///./src/views/Products.vue","webpack:///./src/components/ProductModal.vue","webpack:///./src/components/ProductModal.vue?6218","webpack:///./src/views/Products.vue?95da"],"names":["all","n","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","class","products","item","key","id","href","getModalProduct","src","imageUrl","alt","title","to","origin_price","price","type","addToCart","page","pagination","getProducts","ref","product","active","isLoading","tabindex","role","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","tempProduct","imagesUrl","img","category","description","content","modifyQty","qty","min","$emit","props","data","modal","watch","this","mounted","$refs","productModal","keyboard","backdrop","methods","showModal","show","hideModal","hide","action","render","cartsData","url","$http","then","res","success","alert","message","catch","err","console","log","cart","product_id","post","components","created","__scopeId"],"mappings":"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","file":"js/chunk-6eb52520.de585ec4.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Products.vue?vue&type=style&index=0&id=6f79c19f&scoped=true&lang=css\"","export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt'\n\nconst emitter = mitt()\nexport default emitter\n","<template>\n  <div class=\"products\">\n    <h1>前台產品列表</h1>\n    <!-- 產品列表  -->\n    <table class=\"table align-middle mt-4\">\n      <thead class=\"table align-middle\">\n        <tr>\n          <th>圖片</th>\n          <th>商品名稱</th>\n          <th>價格</th>\n          <th>商品介紹</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in products\" :key=\"item.id\">\n          <td>\n            <a href=\"#\" @click=\"getModalProduct(item.id)\"\n              ><img\n                :src=\"item.imageUrl\"\n                :alt=\"`${item.title}圖片`\"\n                class=\"list-image\"\n            /></a>\n          </td>\n          <td>\n            <!-- 以頁面顯示單一產品頁 -->\n            <router-link :to=\"`/product/${item.id}`\">{{ item.title }}</router-link>\n          </td>\n          <td>\n            <del>原價：{{ item.origin_price }}元</del>\n            <div>優惠價：{{ item.price }}元</div>\n          </td>\n          <td>\n            <!-- 使用 Modal 開啟單一商品 -->\n            <div class=\"btn-group btn-group-sm\">\n              <button\n                @click=\"getModalProduct(item.id)\"\n                type=\"button\"\n                class=\"btn btn-outline-secondary\"\n              >\n                查看商品資訊\n              </button>\n              <button\n                @click=\"addToCart(item.id)\"\n                type=\"button\"\n                class=\"btn btn-outline-danger\"\n              >\n                加到購物車\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <!-- pagination bloc  -->\n    <div class=\"col-6\">\n      <pagination :page=\"pagination\" @get-products=\"getProducts\"></pagination>\n    </div>\n      <!-- 單一產品Modal  -->\n      <product-modal ref=\"productModal\" :product=\"product\" @add-to-cart=\"addToCart\"></product-modal>\n      <!-- loading -->\n      <loading :active.sync=\"isLoading\"></loading>\n  </div>\n</template>\n\n<script>\nimport pagination from '@/components/Pagination.vue'\nimport productModal from '@/components/ProductModal.vue'\nimport emitter from '../assets/javascript/emitter'\nexport default {\n  // name: \"Products\",\n  data () {\n    return {\n      products: [],\n      product: {},\n      cartsData: {},\n      isLoading: false,\n      pagination: {}\n    }\n  },\n  methods: {\n    // Get 所有商品\n    getProducts (page = 1) {\n      this.isLoading = true\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products?page=${page}`\n      this.$http\n        .get(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.isLoading = false\n            this.products = res.data.products\n            this.pagination = res.data.pagination\n          } else {\n            alert(res.data.message)\n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    // Get 單一商品(Modal)\n    getModalProduct (id) {\n      this.isLoading = true\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${id}`\n      this.$http\n        .get(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.product = res.data.product\n            this.isLoading = false\n            this.$refs.productModal.showModal()\n          } else {\n            alert(res.data.message)\n          }\n        }).catch((err) => {\n          console.log(err)\n        })\n    },\n    // Post 增加購物車\n    addToCart (id, qty = 1) {\n      this.isLoading = true\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      const cart = {\n        product_id: id,\n        qty: qty\n      }\n      this.$http\n        .post(url, {\n          data: cart\n        })\n        .then((res) => {\n          if (res.data.success) {\n            emitter.emit('updata-cart')\n            alert(res.data.message)\n            this.isLoading = false\n            this.$refs.productModal.hideModal()\n          } else {\n            alert(res.data.message)\n          }\n        }).catch((err) => {\n          console.log(err)\n        })\n    }\n  },\n  components: {\n    productModal,\n    pagination\n  },\n  created () {\n    this.getProducts()\n  }\n}\n</script>\n\n<style scoped>\n.list-image {\n  width: 200px;\n}\n</style>\n","<template>\n<div class=\"modal fade\" id=\"productModal\" ref=\"productModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\"\n  aria-hidden=\"true\" >\n  <div class=\"modal-dialog modal-xl\" role=\"document\">\n    <div class=\"modal-content border-0\">\n      <div class=\"modal-header bg-dark text-white\">\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n          <span>{{tempProduct.title}}</span>\n        </h5>\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"row\">\n          <div class=\"col-sm-6\">\n            <img class=\"img-fluid\" :src=\"tempProduct.imageUrl\" alt=\"\">\n            <div class=\"row mt-2\">\n              <div class=\"col-4\" v-for=\"(img) in tempProduct.imagesUrl\"\n                :key=\"img\">\n                <img :src=\"img\" class=\"img-fluid\" :alt=\"tempProduct.title\">\n              </div>\n            </div>\n          </div>\n          <div class=\"col-sm-6\">\n            <span class=\"badge bg-primary rounded-pill\">{{tempProduct.category}}</span>\n            <p>{{tempProduct.description}}</p>\n            <p>商品內容：{{tempProduct.content}}</p>\n            <del class=\"h6\">原價：{{tempProduct.origin_price}} 元</del>\n            <div class=\"h5\">優惠價：{{tempProduct.price}}</div>\n            <div>\n          <div class=\"row flex-row-reverse mt-3\">\n            <div class=\"col-6\">\n              <div class=\"input-group\">\n                <div @click=\"modifyQty('decrease')\" class=\"btn_modify_qty_cart border\"> - </div>\n                <input type=\"number\" class=\"form-control m-0 p-1 text-center fw-bold border\" v-model.number=\"qty\" min=\"1\">\n                <div @click=\"modifyQty('add')\"  class=\"btn_modify_qty_cart border\"> + </div>\n                <button @click=\"$emit('add-to-cart', tempProduct.id,qty)\" type=\"button\" class=\"btn btn-primary\">加入購物車</button>\n              </div>\n            </div>\n          </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal'\nexport default {\n  // 父層取資料 props\n  props: ['product'],\n  data () {\n    return {\n      tempProduct: {},\n      modal: '',\n      qty: 1\n    }\n  },\n  watch: { // 待查正確使用方法\n    product () {\n      this.tempProduct = this.product\n    }\n  },\n  mounted () {\n    this.modal = new Modal(this.$refs.productModal, {\n      keyboard: false,\n      backdrop: 'static'\n    })\n  },\n  methods: {\n    showModal () {\n      this.qty = 1\n      this.modal.show()\n    },\n    hideModal () {\n      this.modal.hide()\n    },\n    modifyQty (action) {\n      // console.log('modifyQtyOK');\n      if (action === 'decrease') {\n        if (this.qty > 1) {\n          this.qty--\n        } else {\n          return this.qty\n        }\n      } else if (action === 'add') {\n        this.qty++\n      }\n    }\n  }\n}\n</script>\n","import { render } from \"./ProductModal.vue?vue&type=template&id=435758d1\"\nimport script from \"./ProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./ProductModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Products.vue?vue&type=template&id=6f79c19f&scoped=true\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\n\nimport \"./Products.vue?vue&type=style&index=0&id=6f79c19f&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-6f79c19f\"\n\nexport default script"],"sourceRoot":""}