(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63cd6126"],{"1dde":function(e,t,a){var c=a("d039"),o=a("b622"),r=a("2d00"),n=o("species");e.exports=function(e){return r>=51||!c((function(){var t=[],a=t.constructor={};return a[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"395d":function(e,t,a){"use strict";a.r(t);a("b0c0");var c=a("7a23"),o=Object(c["withScopeId"])("data-v-7954d449");Object(c["pushScopeId"])("data-v-7954d449");var r={key:0,class:"carts"},n={class:"text-end"},l={class:"table align-middle"},s=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th"),Object(c["createVNode"])("th",null,"品名"),Object(c["createVNode"])("th",null,"數量"),Object(c["createVNode"])("th",null,"單價"),Object(c["createVNode"])("th",null,"金額")])],-1),i={width:"100"},d={class:"input-group"},u={class:"text-end"},m=Object(c["createVNode"])("td",{colspan:"4",class:"text-end"},"總計 :",-1),f={class:"text-end"},b=Object(c["createVNode"])("h2",null,"客戶資料表單",-1),p={class:"my-5 row justify-content-center"},h={class:"mb-3"},O=Object(c["createVNode"])("label",{for:"email",class:"form-label"},"Email",-1),v={class:"mb-3"},g=Object(c["createVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),j={class:"mb-3"},V=Object(c["createVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),N={class:"mb-3"},y=Object(c["createVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),x={class:"mb-3"},C=Object(c["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1),w=Object(c["createVNode"])("div",{class:"text-end"},[Object(c["createVNode"])("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);Object(c["popScopeId"])();var k=o((function(e,t,a,k,L,S){var D=Object(c["resolveComponent"])("Field"),_=Object(c["resolveComponent"])("ErrorMessage"),q=Object(c["resolveComponent"])("Form"),B=Object(c["resolveComponent"])("loading");return function(e){return 1}?(Object(c["openBlock"])(),Object(c["createBlock"])("div",r,[Object(c["createVNode"])("div",n,[Object(c["createVNode"])("button",{onClick:t[1]||(t[1]=function(){return S.deleteAllCarts&&S.deleteAllCarts.apply(S,arguments)}),type:"button",class:"btn btn-outline-danger"}," 清空購物車 ")]),Object(c["createVNode"])("div",null,[Object(c["createVNode"])("table",l,[s,Object(c["createVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(L.cartsData.carts,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:e.id},[Object(c["createVNode"])("td",null,[Object(c["createVNode"])("button",{onClick:function(t){return S.deleteCart(e.id)},type:"button",class:"btn btn-outline-danger btn-sm"}," X ",8,["onClick"])]),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.product.title),1),Object(c["createVNode"])("td",i,[Object(c["createVNode"])("div",d,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{onBlur:function(t){return S.updateCart(e)},type:"number",class:"form-control m-0 p-1 text-center fw-bold border","onUpdate:modelValue":function(t){return e.qty=t},min:"1"},null,40,["onBlur","onUpdate:modelValue"]),[[c["vModelText"],e.qty,void 0,{number:!0}]])])]),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.product.price),1),Object(c["createVNode"])("td",u,Object(c["toDisplayString"])(e.total),1)])})),128))]),Object(c["createVNode"])("tfoot",null,[m,Object(c["createVNode"])("td",f,Object(c["toDisplayString"])(L.cartsData.final_total),1)])])]),b,Object(c["createVNode"])("div",p,[Object(c["createVNode"])(q,{onSubmit:S.addOrder,ref:"form",class:"col-md-6"},{default:o((function(e){var a=e.errors;return[Object(c["createVNode"])("div",h,[O,Object(c["createVNode"])(D,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":a["email"]}],rules:"email|required",placeholder:"請輸入 Email",modelValue:L.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return L.form.user.email=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(_,{name:"email",class:"invalid-feedback"})]),Object(c["createVNode"])("div",v,[g,Object(c["createVNode"])(D,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":a["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:L.form.user.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return L.form.user.name=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(_,{name:"姓名",class:"invalid-feedback"})]),Object(c["createVNode"])("div",j,[V,Object(c["createVNode"])(D,{modelValue:L.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return L.form.user.tel=e}),id:"tel",name:"電話",rules:"required|min:8|max:10",type:"text",class:[{"is-invalid":a["電話"]},"form-control"],placeholder:"請輸入電話"},null,8,["modelValue","class"]),Object(c["createVNode"])(_,{name:"電話",class:"invalid-feedback"})]),Object(c["createVNode"])("div",N,[y,Object(c["createVNode"])(D,{modelValue:L.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return L.form.user.address=e}),id:"address",name:"地址",rules:"required",type:"text",class:[{"is-invalid":a["地址"]},"form-control"],placeholder:"請輸入地址"},null,8,["modelValue","class"]),Object(c["createVNode"])(_,{name:"地址",class:"invalid-feedback"})]),Object(c["createVNode"])("div",x,[C,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{id:"message",name:"留言","onUpdate:modelValue":t[6]||(t[6]=function(e){return L.form.message=e}),class:[{"is-invalid":a["留言"]},"form-control"],cols:"30",rows:"10",placeholder:"請輸入留言",rules:""},null,2),[[c["vModelText"],L.form.message]])]),w]})),_:1},8,["onSubmit"])]),Object(c["createVNode"])(B,{active:L.isLoading},null,8,["active"])])):Object(c["createCommentVNode"])("",!0)})),L=(a("99af"),a("e4f3")),S={data:function(){return{cartsData:{},final_total:0,isLoading:!1,form:{user:{email:"",name:"",tel:"",address:""},message:""}}},methods:{addToCart:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("moitw","/cart"),o={product_id:e,qty:a};this.$http.post(c,{data:o}).then((function(e){e.data.success?(L["a"].emit("update-cart"),alert(e.data.message),t.isLoading=!1,t.$refs.productModal.hideModal(),t.getCarts()):alert(e.data.message)})).catch((function(e){console.log(e)}))},updateCart:function(e){var t=this;this.isLoading=!0;var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("moitw","/cart/").concat(e.id),c={product_id:e.id,qty:e.qty};this.$http.put(a,{data:c}).then((function(e){e.data.success?(L["a"].emit("update-cart"),alert(e.data.message),t.isLoading=!1,t.getCarts()):alert(e.data.message)})).catch((function(e){console.log(e)}))},deleteAllCarts:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("moitw","/carts");this.$http.delete(t).then((function(t){t.data.success?(e.isLoading=!1,L["a"].emit("update-cart"),e.getCarts()):alert(t.data.message)})).catch((function(e){console.log(e)}))},getCarts:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("moitw","/cart");this.isLoading=!0,this.$http.get(t).then((function(t){t.data.success?(e.isLoading=!1,e.cartsData=t.data.data,e.final_total=t.data.data.final_total,0===e.final_total&&e.$router.push("/products")):alert(t.data.message)})).catch((function(e){console.log(e)}))},deleteCart:function(e){var t=this;this.isLoading=!0;var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("moitw","/cart/").concat(e);this.$http.delete(a).then((function(e){e.data.success?(L["a"].emit("update-cart"),t.isLoading=!1,alert(e.data.message),t.getCarts()):alert(e.data.message)})).catch((function(e){console.log(e)}))},addOrder:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("moitw","/order"),a=this.form;console.log(a),this.$http.post(t,{data:a}).then((function(t){t.data.success?(e.isLoading=!1,alert(t.data.message),console.log(e.form),e.$refs.form.resetForm(),e.form.message="",e.getCarts()):alert(t.data.message)})).catch((function(e){console.log(e)}))}},mounted:function(){this.getCarts()},created:function(){}};S.render=k,S.__scopeId="data-v-7954d449";t["default"]=S},8418:function(e,t,a){"use strict";var c=a("c04e"),o=a("9bf2"),r=a("5c6c");e.exports=function(e,t,a){var n=c(t);n in e?o.f(e,n,r(0,a)):e[n]=a}},"99af":function(e,t,a){"use strict";var c=a("23e7"),o=a("d039"),r=a("e8b5"),n=a("861d"),l=a("7b0b"),s=a("50c4"),i=a("8418"),d=a("65f0"),u=a("1dde"),m=a("b622"),f=a("2d00"),b=m("isConcatSpreadable"),p=9007199254740991,h="Maximum allowed index exceeded",O=f>=51||!o((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),v=u("concat"),g=function(e){if(!n(e))return!1;var t=e[b];return void 0!==t?!!t:r(e)},j=!O||!v;c({target:"Array",proto:!0,forced:j},{concat:function(e){var t,a,c,o,r,n=l(this),u=d(n,0),m=0;for(t=-1,c=arguments.length;t<c;t++)if(r=-1===t?n:arguments[t],g(r)){if(o=s(r.length),m+o>p)throw TypeError(h);for(a=0;a<o;a++,m++)a in r&&i(u,m,r[a])}else{if(m>=p)throw TypeError(h);i(u,m++,r)}return u.length=m,u}})},b0c0:function(e,t,a){var c=a("83ab"),o=a("9bf2").f,r=Function.prototype,n=r.toString,l=/^\s*function ([^ (]*)/,s="name";c&&!(s in r)&&o(r,s,{configurable:!0,get:function(){try{return n.call(this).match(l)[1]}catch(e){return""}}})},e4f3:function(e,t,a){"use strict";var c=function(e){return{all:e=e||new Map,on:function(t,a){var c=e.get(t);c?c.push(a):e.set(t,[a])},off:function(t,a){var c=e.get(t);c&&(a?c.splice(c.indexOf(a)>>>0,1):e.set(t,[]))},emit:function(t,a){var c=e.get(t);c&&c.slice().map((function(e){e(a)})),(c=e.get("*"))&&c.slice().map((function(e){e(t,a)}))}}},o=c();t["a"]=o}}]);
//# sourceMappingURL=chunk-63cd6126.6cd0a528.js.map