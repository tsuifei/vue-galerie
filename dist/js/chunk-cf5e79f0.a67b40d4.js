(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf5e79f0"],{"7dd4":function(t,c,e){},ccd2:function(t,c,e){"use strict";e("7dd4")},e6dc:function(t,c,e){"use strict";e.r(c);var o=e("7a23"),a=Object(o["N"])("data-v-025ce07c");Object(o["w"])("data-v-025ce07c");var d={class:"products"},n=Object(o["h"])("h1",null,"W6 產品列表 購物車 表單驗證",-1),l={class:"table align-middle mt-4"},i=Object(o["h"])("thead",{class:"table align-middle"},[Object(o["h"])("tr",null,[Object(o["h"])("th",null,"圖片"),Object(o["h"])("th",null,"商品名稱"),Object(o["h"])("th",null,"價格"),Object(o["h"])("th",null,"商品介紹")])],-1),r={class:"btn-group btn-group-sm"},s={class:"col-6"};Object(o["u"])();var u=a((function(t,c,e,a,u,b){var h=Object(o["A"])("pagination"),p=Object(o["A"])("product-modal");return Object(o["t"])(),Object(o["d"])("div",d,[n,Object(o["h"])("table",l,[i,Object(o["h"])("tbody",null,[(Object(o["t"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(u.products,(function(t){return Object(o["t"])(),Object(o["d"])("tr",{key:t.id},[Object(o["h"])("td",null,[Object(o["h"])("a",{href:"#",onClick:function(c){return b.getModalProduct(t.id)}},[Object(o["h"])("img",{src:t.imageUrl,alt:"".concat(t.title,"圖片"),class:"list-image"},null,8,["src","alt"])],8,["onClick"])]),Object(o["h"])("td",null,Object(o["D"])(t.title),1),Object(o["h"])("td",null,[Object(o["h"])("del",null,"原價："+Object(o["D"])(t.origin_price)+"元",1),Object(o["h"])("div",null,"優惠價："+Object(o["D"])(t.price)+"元",1)]),Object(o["h"])("td",null,[Object(o["h"])("div",r,[Object(o["h"])("button",{onClick:function(c){return b.getModalProduct(t.id)},type:"button",class:"btn btn-outline-secondary"}," 查看商品資訊 ",8,["onClick"]),Object(o["h"])("button",{onClick:function(c){return b.addToCart(t.id)},type:"button",class:"btn btn-outline-danger"}," 加到購物車 ",8,["onClick"])])])])})),128))])]),Object(o["h"])("div",s,[Object(o["h"])(h,{page:u.pagination,onGetProducts:b.getProducts},null,8,["page","onGetProducts"])]),Object(o["h"])(p,{ref:"productModal",product:u.product,onAddToCart:b.addToCart},null,8,["product","onAddToCart"])])})),b=(e("99af"),e("1799")),h=(e("a4d3"),e("e01a"),{class:"modal fade",id:"productModal",ref:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}),p={class:"modal-dialog modal-xl",role:"document"},j={class:"modal-content border-0"},O={class:"modal-header bg-dark text-white"},m={class:"modal-title",id:"exampleModalLabel"},f=Object(o["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),g={class:"modal-body"},v={class:"row"},y={class:"col-sm-6"},w={class:"row mt-2"},P={class:"col-sm-6"},k={class:"badge bg-primary rounded-pill"},M={class:"h6"},C={class:"h5"},q={class:"row flex-row-reverse mt-3"},_={class:"col-6"},x={class:"input-group"};function D(t,c,e,a,d,n){return Object(o["t"])(),Object(o["d"])("div",h,[Object(o["h"])("div",p,[Object(o["h"])("div",j,[Object(o["h"])("div",O,[Object(o["h"])("h5",m,[Object(o["h"])("span",null,Object(o["D"])(d.tempProduct.title),1)]),f]),Object(o["h"])("div",g,[Object(o["h"])("div",v,[Object(o["h"])("div",y,[Object(o["h"])("img",{class:"img-fluid",src:d.tempProduct.imageUrl,alt:""},null,8,["src"]),Object(o["h"])("div",w,[(Object(o["t"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(d.tempProduct.imagesUrl,(function(t){return Object(o["t"])(),Object(o["d"])("div",{class:"col-4",key:t},[Object(o["h"])("img",{src:t,class:"img-fluid",alt:d.tempProduct.title},null,8,["src","alt"])])})),128))])]),Object(o["h"])("div",P,[Object(o["h"])("span",k,Object(o["D"])(d.tempProduct.category),1),Object(o["h"])("p",null,Object(o["D"])(d.tempProduct.description),1),Object(o["h"])("p",null,"商品內容："+Object(o["D"])(d.tempProduct.content),1),Object(o["h"])("del",M,"原價："+Object(o["D"])(d.tempProduct.origin_price)+" 元",1),Object(o["h"])("div",C,"優惠價："+Object(o["D"])(d.tempProduct.price),1),Object(o["h"])("div",null,[Object(o["h"])("div",q,[Object(o["h"])("div",_,[Object(o["h"])("div",x,[Object(o["h"])("div",{onClick:c[1]||(c[1]=function(t){return n.modifyQty("decrease")}),class:"btn_modify_qty_cart border"}," - "),Object(o["L"])(Object(o["h"])("input",{type:"number",class:"form-control m-0 p-1 text-center fw-bold border","onUpdate:modelValue":c[2]||(c[2]=function(t){return d.qty=t}),min:"1"},null,512),[[o["H"],d.qty,void 0,{number:!0}]]),Object(o["h"])("div",{onClick:c[3]||(c[3]=function(t){return n.modifyQty("add")}),class:"btn_modify_qty_cart border"}," + "),Object(o["h"])("button",{onClick:c[4]||(c[4]=function(c){return t.$emit("add-to-cart",d.tempProduct.id,d.qty)}),type:"button",class:"btn btn-primary"},"加入購物車")])])])])])])])])])],512)}var L=e("7c2b"),$=e.n(L),T={props:["product"],data:function(){return{tempProduct:{},modal:"",qty:1}},watch:{product:function(){this.tempProduct=this.product}},mounted:function(){this.modal=new $.a(this.$refs.productModal,{keyboard:!1,backdrop:"static"})},methods:{showModal:function(){this.qty=1,this.modal.show()},hideModal:function(){this.modal.hide()},modifyQty:function(t){if("decrease"===t){if(!(this.qty>1))return this.qty;this.qty--}else"add"===t&&this.qty++}}};T.render=D;var A=T,U={data:function(){return{products:[],product:{},cartsData:{},isLoading:!0,pagination:{}}},methods:{getProducts:function(){var t=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("moitw","/products?page=").concat(c);this.$http.get(e).then((function(c){c.data.success?(t.products=c.data.products,t.isLoading=!1,t.pagination=c.data.pagination):alert(c.data.message)})).catch((function(t){console.log(t)}))},getModalProduct:function(t){var c=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("moitw","/product/").concat(t);this.$http.get(e).then((function(t){t.data.success?(console.log("ok?"),c.product=t.data.product,c.$refs.productModal.showModal()):alert(t.data.message)})).catch((function(t){console.log(t)}))},addToCart:function(t){var c=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0;var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("moitw","/cart"),a={product_id:t,qty:e};this.$http.post(o,{data:a}).then((function(t){t.data.success?(alert(t.data.message),c.isLoading=!1,c.$refs.productModal.hideModal()):alert(t.data.message)})).catch((function(t){console.log(t)}))}},components:{productModal:A,pagination:b["a"]},created:function(){this.getProducts()}};e("ccd2");U.render=u,U.__scopeId="data-v-025ce07c";c["default"]=U}}]);
//# sourceMappingURL=chunk-cf5e79f0.a67b40d4.js.map